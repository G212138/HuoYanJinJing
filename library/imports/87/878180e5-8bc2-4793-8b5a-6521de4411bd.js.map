{"version":3,"sources":["assets\\frame\\scripts\\UI\\Panel\\BaseTeacherPanel.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uEAAsE;AACtE,gFAA+E;AAC/E,8CAA6C;AAC7C,6CAA4C;AAC5C,oCAAmC;AAE7B,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA8C,oCAAM;IAApD;;IA0EA,CAAC;IAxEG,iCAAM,GAAN,cAAU,CAAC;IAEX,gCAAK,GAAL;QACI,IAAI,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC;QACtD,IAAI,OAAO,EAAE;YACT,OAAO,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;SAClC;QACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClD,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,eAAM,CAAC,gBAAgB,EAAE,CAAC;IAC9B,CAAC;IAEM,mCAAQ,GAAf,cAAmB,CAAC;IAEZ,iCAAM,GAAd;QAAA,iBAwCC;QAvCG,iBAAO,CAAC,WAAW,CACf,iBAAO,CAAC,SAAS,GAAG,YAAY,GAAG,iBAAO,CAAC,OAAO,EAClD,KAAK,EACL,gCAAgC,EAChC,UAAC,GAAG,EAAE,QAAQ;YACV,OAAO,CAAC,GAAG,CAAC,MAAM,GAAG,QAAQ,CAAC,CAAC;YAC/B,IAAI,CAAC,GAAG,EAAE;gBACN,IAAI,GAAG,GAAG,QAAQ,CAAC;gBACnB,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;oBACzB,KAAI,CAAC,QAAQ,EAAE,CAAC;oBAChB,OAAO;iBACV;gBACD,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;gBACtD,iBAAO,CAAC,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC;gBAC9C,IAAI,iBAAO,CAAC,KAAK,EAAE;oBACf,mCAAmC;oBACnC,KAAI,CAAC,QAAQ,EAAE,CAAC;iBACnB;qBAAM;oBACH,IAAI,OAAO,IAAI,IAAI,EAAE;wBACjB,IAAI,OAAO,CAAC,aAAa,IAAI,uBAAU,CAAC,aAAa,EAAE;4BACnD,eAAM,CAAC,cAAc,CACjB,mCAAmC,GAAG,iBAAO,CAAC,OAAO,EACrD,EAAE,EACF,EAAE,EACF,IAAI,CACP,CAAC;4BACF,OAAO;yBACV;wBACD,mBAAmB;wBACnB,6BAAa,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;wBACpC,KAAI,CAAC,QAAQ,EAAE,CAAC;qBACnB;yBAAM;wBACH,KAAI,CAAC,QAAQ,EAAE,CAAC;qBACnB;iBACJ;aACJ;QACL,CAAC,EACD,IAAI,CACP,CAAC;IACN,CAAC;IAED,kBAAkB;IAClB,mCAAQ,GAAR;QACI,IAAI,QAAQ,GAAG,EAAE,aAAa,EAAE,iBAAO,CAAC,YAAY,EAAE,CAAC;QACvD,iBAAO,CAAC,WAAW,CACf,iBAAO,CAAC,KAAK,EACb,MAAM,EACN,gCAAgC,EAChC,UAAC,GAAG,EAAE,QAAQ;YACV,IAAI,CAAC,GAAG,EAAE;gBACN,eAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;aAC5B;QACL,CAAC,EACD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAC3B,CAAC;IACN,CAAC;IAvEa,0BAAS,GAAG,kBAAkB,CAAC;IAD5B,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CA0EpC;IAAD,uBAAC;CA1ED,AA0EC,CA1E6C,eAAM,GA0EnD;kBA1EoB,gBAAgB","file":"","sourceRoot":"/","sourcesContent":["import { ConstValue } from '../../../../game/scripts/Data/ConstValue';\r\nimport { EditorManager } from '../../../../game/scripts/Manager/EditorManager';\r\nimport { NetWork } from '../../Http/NetWork';\r\nimport { UIHelp } from '../../Utils/UIHelp';\r\nimport { BaseUI } from '../BaseUI';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class BaseTeacherPanel extends BaseUI {\r\n    public static className = 'BaseTeacherPanel';\r\n    onLoad() {}\r\n\r\n    start() {\r\n        let loading = document.getElementById('loading-full');\r\n        if (loading) {\r\n            loading.style.display = 'none';\r\n        }\r\n        this.data.node.parent.removeChild(this.data.node);\r\n        this.getNet();\r\n        UIHelp.closeRecoverMask();\r\n    }\r\n\r\n    public setPanel() {}\r\n\r\n    private getNet() {\r\n        NetWork.httpRequest(\r\n            NetWork.GET_TITLE + '?title_id=' + NetWork.titleId,\r\n            'GET',\r\n            'application/json;charset=utf-8',\r\n            (err, response) => {\r\n                console.log('消息返回' + response);\r\n                if (!err) {\r\n                    let res = response;\r\n                    if (Array.isArray(res.data)) {\r\n                        this.setPanel();\r\n                        return;\r\n                    }\r\n                    let content = JSON.parse(res.data.courseware_content);\r\n                    NetWork.coursewareId = res.data.courseware_id;\r\n                    if (NetWork.empty) {\r\n                        //如果URL里面带了empty参数 并且为true  就立刻清除数据\r\n                        this.ClearNet();\r\n                    } else {\r\n                        if (content != null) {\r\n                            if (content.CoursewareKey != ConstValue.CoursewareKey) {\r\n                                UIHelp.showErrorPanel(\r\n                                    '该titleId已被使用,请联系技术老师解决！\\ntitleId=' + NetWork.titleId,\r\n                                    '',\r\n                                    '',\r\n                                    '确定',\r\n                                );\r\n                                return;\r\n                            }\r\n                            // 如果编辑器数据修改 先注释掉此行\r\n                            EditorManager.setData(content.data);\r\n                            this.setPanel();\r\n                        } else {\r\n                            this.setPanel();\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            null,\r\n        );\r\n    }\r\n\r\n    //删除课件数据  一般为脏数据清理\r\n    ClearNet() {\r\n        let jsonData = { courseware_id: NetWork.coursewareId };\r\n        NetWork.httpRequest(\r\n            NetWork.CLEAR,\r\n            'POST',\r\n            'application/json;charset=utf-8',\r\n            (err, response) => {\r\n                if (!err) {\r\n                    UIHelp.showTip('答案删除成功');\r\n                }\r\n            },\r\n            JSON.stringify(jsonData),\r\n        );\r\n    }\r\n    // update (dt) {}\r\n}\r\n"]}