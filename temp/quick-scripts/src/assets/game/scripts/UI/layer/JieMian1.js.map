{"version":3,"sources":["assets\\game\\scripts\\UI\\layer\\JieMian1.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { NetWork } from \"../../../../frame/scripts/Http/NetWork\";\r\nimport { SoundManager } from \"../../../../frame/scripts/Manager/SoundManager\";\r\nimport { SyncDataManager } from \"../../../../frame/scripts/Manager/SyncDataManager\";\r\nimport { T2M } from \"../../../../frame/scripts/SDK/T2M\";\r\nimport { HitTest } from \"../../../../frame/scripts/Utils/HitTest\";\r\nimport { MathUtils } from \"../../../../frame/scripts/Utils/MathUtils\";\r\nimport { EventType } from \"../../Data/EventType\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class JieMian1 extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    private nanNode: cc.Node = null;\r\n    @property(cc.Node)\r\n    private nvNode: cc.Node = null;\r\n    @property(cc.Label)\r\n    private eagLabel: cc.Label = null;\r\n    @property(cc.Node)\r\n    private tiJiaoBtn: cc.Node = null;\r\n    @property(cc.Node)\r\n    private Handle: cc.Node = null;\r\n\r\n\r\n\r\n    private get sysData() {\r\n        return SyncDataManager.getSyncData().customSyncData;\r\n    }\r\n\r\n    private set sysData(value) {\r\n        SyncDataManager.getSyncData().customSyncData = value;\r\n    }\r\n\r\n    onLoad() {\r\n\r\n    }\r\n    onDestroy() {\r\n    }\r\n\r\n    public initData() {\r\n        this.nanNode.getChildByName(\"checkmark\").active = this.sysData.gameData1.xingBie == 0;\r\n        this.nvNode.getChildByName(\"checkmark\").active = this.sysData.gameData1.xingBie == 1;\r\n\r\n        this.setTiJiaoBtn();\r\n        this.setAge();\r\n        this.scheduleOnce(() => {\r\n            this.setGuide();\r\n        }, 1)\r\n    }\r\n\r\n    private setGuide() {\r\n        if (this.sysData.gameData1.xingBie != -1) {\r\n            this.node.getChildByName(\"shouzhi1\").active = false;\r\n            return;\r\n        }\r\n        let curNode = this.node.getChildByName(\"shouzhi1\");\r\n        curNode.position = cc.v3(-192, 210);\r\n        curNode.active = true;\r\n        curNode.opacity = 255;\r\n        cc.tween(curNode)\r\n            .to(0.3, { scale: 0.8 })\r\n            .to(0.3, { scale: 1 })\r\n            .to(0.3, { scale: 0.8 })\r\n            .to(0.3, { scale: 1 })\r\n            .call(() => {\r\n                curNode.position = cc.v3(304, 210);\r\n                cc.tween(curNode)\r\n                    .to(0.3, { scale: 0.8 })\r\n                    .to(0.3, { scale: 1 })\r\n                    .to(0.3, { scale: 0.8 })\r\n                    .to(0.3, { scale: 1 })\r\n                    .call(() => {\r\n                        curNode.active = false;\r\n                    })\r\n                    .start();\r\n            })\r\n            .start();\r\n    }\r\n\r\n    private isClickIng = false;\r\n    public onClickNanNv(event: cc.Event, type: any) {\r\n        if (this.isClickIng) return;\r\n        this.node.getChildByName(\"shouzhi1\").active = false;\r\n        this.isClickIng = true;\r\n        SoundManager.stopSoundByName(\"点击音效\");\r\n        SoundManager.playEffect(\"点击音效\", false, false, false);\r\n        let node1 = type == \"0\" ? this.nvNode : this.nanNode;\r\n        node1.getChildByName(\"checkmark\").active = false;\r\n        let node2 = type == \"0\" ? this.nanNode : this.nvNode;\r\n        node2.getChildByName(\"checkmark\").active = !node2.getChildByName(\"checkmark\").active;\r\n        this.sysData.gameData1.xingBie = node2.getChildByName(\"checkmark\").active ? Number(type) : -1;\r\n        this.setTiJiaoBtn();\r\n        this.scheduleOnce(() => {\r\n            this.isClickIng = false;\r\n        }, 0.2)\r\n    }\r\n\r\n\r\n    private getHitNodeIndex(nodePos: cc.Vec2): boolean {\r\n        let InRect = false;\r\n        if (HitTest.posInRect(nodePos, this.Handle)) {\r\n            InRect = true;\r\n        }\r\n        return InRect;\r\n    }\r\n\r\n    private isStartInRect = null;\r\n    private onDragStart(data: any) {\r\n        this.isStartInRect = this.getHitNodeIndex(cc.v2(data.pos.x, data.pos.y));\r\n        if (this.isStartInRect) {\r\n            SoundManager.stopSoundByName(\"拖动音效\")\r\n            SoundManager.playEffect(\"拖动音效\", false, false, false)\r\n        }\r\n    }\r\n\r\n    private onDragMove(data: any) {\r\n        if (!this.isStartInRect) {\r\n            return;\r\n        }\r\n        let pos = this.Handle.parent.convertToNodeSpaceAR(cc.v2(data.pos.x, data.pos.y));\r\n        let movex = Math.round(pos.x);\r\n        if (movex <= -430) {\r\n            movex = -430\r\n        } else if (movex >= 430) {\r\n            movex = 430\r\n        }\r\n        this.Handle.x = movex;\r\n        let dis = MathUtils.getInstance().getDistance(cc.v3(0, -430), cc.v3(0, movex));\r\n        let progress = dis / 860;\r\n        this.sysData.gameData1.nianLing = Math.round(100 * progress);\r\n        this.sysData.gameData1.AgeDis = dis;\r\n        this.setAge();\r\n    }\r\n\r\n    private onDragEnd(data: any) {\r\n        if (data.isClick || !this.isStartInRect) {\r\n            return;\r\n        }\r\n        this.setTiJiaoBtn();\r\n    }\r\n\r\n    private setAge() {\r\n        this.Handle.x = -430 + this.sysData.gameData1.AgeDis;\r\n        this.eagLabel.string = this.sysData.gameData1.nianLing.toString();\r\n    }\r\n\r\n    private setTiJiaoBtn() {\r\n        this.tiJiaoBtn.active = true;\r\n        if (this.sysData.gameData1.xingBie == -1 || this.sysData.gameData1.nianLing == 0) {\r\n            this.tiJiaoBtn.children[0].active = false;\r\n            this.tiJiaoBtn.children[1].active = true;\r\n        } else {\r\n            this.tiJiaoBtn.children[0].active = true;\r\n            this.tiJiaoBtn.children[1].active = false;\r\n        }\r\n    }\r\n\r\n\r\n\r\n}\r\n"]}