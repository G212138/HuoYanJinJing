{"version":3,"sources":["assets\\game\\scripts\\UI\\layer\\GameLayer.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport { ListenerManager } from \"../../../../frame/scripts/Manager/ListenerManager\";\r\nimport { SoundManager } from \"../../../../frame/scripts/Manager/SoundManager\";\r\nimport { SyncDataManager } from \"../../../../frame/scripts/Manager/SyncDataManager\";\r\nimport { Tools } from \"../../../../frame/scripts/Utils/Tools\";\r\nimport { UIHelp } from \"../../../../frame/scripts/Utils/UIHelp\";\r\nimport { CustomSyncData } from \"../../Data/CustomSyncData\";\r\nimport { EventType } from \"../../Data/EventType\";\r\nimport { EditorManager } from \"../../Manager/EditorManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameLayer extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    private startLayer: cc.Node = null;\r\n    @property(cc.Node)\r\n    private endLayer: cc.Node = null;\r\n    @property(cc.Node)\r\n    private endLayer2: cc.Node = null;\r\n    @property(cc.Node)\r\n    private firstLayer: cc.Node = null;\r\n    @property(cc.Node)\r\n    private secondLayer: cc.Node = null;\r\n    @property(cc.Label)\r\n    private title: cc.Label = null;\r\n    @property(cc.Label)\r\n    private countdown: cc.Label = null;\r\n    @property(cc.Label)\r\n    private secondLayerLabel: cc.Label = null;\r\n    @property(cc.Node)\r\n    private itemPanel: cc.Node = null;\r\n    @property(cc.Node)\r\n    private wrongTime: cc.Node = null;\r\n    @property(sp.Skeleton)\r\n    private role: sp.Skeleton = null;\r\n    @property(sp.Skeleton)\r\n    private roleKaixin: sp.Skeleton = null;\r\n\r\n    private configData = null;\r\n    start() {\r\n        ListenerManager.on(EventType.ON_CLICK_ITEM, this.onHandleClick, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        ListenerManager.off(EventType.ON_CLICK_ITEM, this.onHandleClick, this);\r\n    }\r\n\r\n    public init() {\r\n        UIHelp.closeMask();\r\n        SyncDataManager.getSyncData().customSyncData.enableClick = true;\r\n        this.configData = EditorManager.editorData.itemData;\r\n        let curStep = SyncDataManager.getSyncData().customSyncData.curStep;\r\n        let isClickStart = SyncDataManager.getSyncData().customSyncData.isClickStart;\r\n        this.startLayer.active = !isClickStart;\r\n\r\n        let typeName = [\"平行线\", \"垂直\", \"直角\", \"锐角\", \"钝角\"]\r\n        let title = \"找出含有\" + typeName[this.configData[curStep].type] + \"的物品\" + this.configData[curStep].count + \"个\";\r\n        this.title.string = title;\r\n        this.secondLayerLabel.string = title;\r\n        this.wrongTime.getComponent(cc.Label).string = \"-\" + EditorManager.editorData.wrongTime.toString();\r\n        this.wrongTime.active = false;\r\n        this.initAllItem();\r\n        this.setCountdownLabel();\r\n        this.roleKaixin.node.active = false;\r\n        this.role.node.active = true;\r\n    }\r\n\r\n    private initAllItem() {\r\n        let allHideItem = SyncDataManager.getSyncData().customSyncData.allHideItem;\r\n        this.itemPanel.children.forEach((item) => {\r\n            item.active = true;\r\n            item.opacity = 255;\r\n            item.angle = 0;\r\n            if (allHideItem.indexOf(item.name) != -1) {\r\n                console.log(\"item.name\");\r\n                item.active = false;\r\n            }\r\n        });\r\n    }\r\n\r\n    private onClickStart() {\r\n        SyncDataManager.getSyncData().customSyncData.isClickStart = true;\r\n        this.startLayer.active = false;\r\n        this.endLayer.active = false;\r\n        this.endLayer2.active = false;\r\n        this.firstLayer.active = true;\r\n        this.showStartLayerAni();\r\n        // this.scheduleOnce(() => {\r\n        //     this.firstLayer.active = false;\r\n        //     this.secondLayer.active = true;\r\n        //     this.scheduleOnce(() => {\r\n        //         this.secondLayer.active = false;\r\n        //         this.startCountdown();\r\n        //     }, 1);\r\n        // }, 1);\r\n\r\n        SyncDataManager.getSyncData().customSyncData.countdown = EditorManager.editorData.countdown;\r\n    }\r\n\r\n    private showStartLayerAni() {\r\n        let dialog = this.firstLayer.getChildByName(\"dialog\");\r\n        Tools.playSpine(dialog.getComponent(sp.Skeleton), \"danchuang\", false, () => {\r\n\r\n        });\r\n        SoundManager.playEffect(\"飞碟抢走了大家的东西，我们去把它们找回来\", false, false, false, () => {\r\n            Tools.playSpine(dialog.getComponent(sp.Skeleton), \"suohui\", false, () => {\r\n                this.role.node.position = cc.v3(-284.681, -297.431);\r\n                this.role.node.scale = 0.3;\r\n                Tools.playSpine(this.role, \"danjun_shuohua2\", true);\r\n                this.firstLayer.active = false;\r\n                this.secondLayer.active = true;\r\n                let secondLayerText = this.secondLayer.getChildByName(\"text\");\r\n                secondLayerText.scale = 0;\r\n                cc.tween(secondLayerText).to(0.2, { scale: 1.2 }).to(0.2, { scale: 1 }).start();\r\n                SoundManager.playEffect(\"找出含有\", false, false, false, () => {\r\n                    let typeName: string[] = [\"平行线\", \"垂直\", \"直角\", \"锐角\", \"钝角\"];\r\n                    SoundManager.playEffect(typeName[this.configData[SyncDataManager.getSyncData().customSyncData.curStep].type], false, false, false, () => {\r\n                        SoundManager.playEffect(\"的物品\", false, false, false, () => {\r\n                            if (this.configData[SyncDataManager.getSyncData().customSyncData.curStep].count < 10) {\r\n                                SoundManager.playEffect((this.configData[SyncDataManager.getSyncData().customSyncData.curStep].count).toString(), false, false, false, () => {\r\n                                    SoundManager.playEffect(\"个\", false, false, false, () => {\r\n                                        cc.tween(secondLayerText).to(0.3, { scale: 0 }).call(() => {\r\n                                            this.secondLayer.active = false;\r\n                                            cc.tween(this.role.node).to(0.5, { position: cc.v3(-792.218, -560.198), scale: 0.2 }).start();\r\n                                            this.startCountdown();\r\n                                        }).start();\r\n                                    });\r\n                                });\r\n                            } else {\r\n                                this.secondLayer.active = false;\r\n                                this.startCountdown();\r\n                            }\r\n                        });\r\n\r\n                    });\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    private startCountdown() {\r\n        let countdown = Number(SyncDataManager.getSyncData().customSyncData.countdown);\r\n        this.schedule(() => {\r\n            SyncDataManager.getSyncData().customSyncData.countdown--;\r\n            this.setCountdownLabel();\r\n            if (SyncDataManager.getSyncData().customSyncData.countdown <= 0) {\r\n                this.timeUp();\r\n            }\r\n        }, 1, countdown);\r\n    }\r\n\r\n    private setCountdownLabel() {\r\n        if (SyncDataManager.getSyncData().customSyncData.countdown <= 0) {\r\n            SyncDataManager.getSyncData().customSyncData.countdown = 0;\r\n        }\r\n        let min = Math.floor(SyncDataManager.getSyncData().customSyncData.countdown / 60);\r\n        let sec = SyncDataManager.getSyncData().customSyncData.countdown % 60;\r\n        let minStr = min < 10 ? '0' + min : min;\r\n        let secStr = sec < 10 ? '0' + sec : sec;\r\n        this.countdown.string = minStr + ':' + secStr;\r\n    }\r\n\r\n    private timeUp() {\r\n        this.unscheduleAllCallbacks();\r\n        this.endLayer2.active = true;\r\n        SoundManager.playEffect(\"你没有找回所有的物品哦\", false, true, false, () => { });\r\n    }\r\n\r\n    private onHandleClick(isTrue: boolean) {\r\n        if (isTrue) {\r\n            let curHideItem = SyncDataManager.getSyncData().customSyncData.curHideItem;\r\n            if (this.configData[SyncDataManager.getSyncData().customSyncData.curStep].count == curHideItem.length) {\r\n                UIHelp.showMask();\r\n                this.scheduleOnce(() => {\r\n                    UIHelp.closeMask();\r\n                    this.handleAllFind();\r\n                }, 1.5);\r\n            }\r\n            this.roleKaixin.node.active = true;\r\n            this.role.node.active = false;\r\n            Tools.playSpine(this.roleKaixin, \"danjun_kaixin\", false, () => {\r\n                this.roleKaixin.node.active = false;\r\n                this.role.node.active = true;\r\n            });\r\n        } else {\r\n            this.wrongTime.active = true;\r\n            this.wrongTime.y = 490;\r\n            let posX = Number(this.countdown.node.parent.x);\r\n            cc.tween(this.countdown.node.parent).to(0.1, { x: posX + 10 }).to(0.1, { x: posX - 10 }).to(0.1, { x: posX + 10 }).to(0.1, { x: posX - 10 }).to(0.1, { x: posX }).start();\r\n            cc.tween(this.wrongTime).to(0.5, { y: 600 }).call(() => {\r\n                SyncDataManager.getSyncData().customSyncData.countdown = SyncDataManager.getSyncData().customSyncData.countdown - EditorManager.editorData.wrongTime + 1;\r\n            }).start();\r\n            this.roleKaixin.node.active = true;\r\n            this.role.node.active = false;\r\n            Tools.playSpine(this.roleKaixin, \"danjun_tanqi\", false, () => {\r\n                this.roleKaixin.node.active = false;\r\n                this.role.node.active = true;\r\n            });\r\n        }\r\n    }\r\n\r\n    private handleAllFind() {\r\n        if (SyncDataManager.getSyncData().customSyncData.curStep == this.configData.length - 1) {\r\n            this.handleGameOver();\r\n        } else {\r\n            this.handleNextStep();\r\n        }\r\n    }\r\n\r\n    private handleNextStep() {\r\n        SyncDataManager.getSyncData().customSyncData.curHideItem = [];\r\n        SyncDataManager.getSyncData().customSyncData.curStep++;\r\n        this.init();\r\n        this.secondLayer.active = true;\r\n        let secondLayerText = this.secondLayer.getChildByName(\"text\");\r\n        secondLayerText.scale = 0;\r\n        cc.tween(secondLayerText).to(0.2, { scale: 1.2 }).to(0.2, { scale: 1 }).start();\r\n        cc.tween(this.role.node).to(0.5, { position: cc.v3(-284.681, -297.431), scale: 0.3 }).start();\r\n        SoundManager.playEffect(\"找出含有\", false, false, false, () => {\r\n            let typeName: string[] = [\"平行线\", \"垂直\", \"直角\", \"锐角\", \"钝角\"];\r\n            SoundManager.playEffect(typeName[this.configData[SyncDataManager.getSyncData().customSyncData.curStep].type], false, false, false, () => {\r\n                SoundManager.playEffect(\"的物品\", false, false, false, () => {\r\n                    if (this.configData[SyncDataManager.getSyncData().customSyncData.curStep].count < 10) {\r\n                        SoundManager.playEffect((this.configData[SyncDataManager.getSyncData().customSyncData.curStep].count).toString(), false, false, false, () => {\r\n                            SoundManager.playEffect(\"个\", false, false, false, () => {\r\n                                // this.secondLayer.active = false;\r\n\r\n                                cc.tween(secondLayerText).to(0.3, { scale: 0 }).call(() => {\r\n                                    this.secondLayer.active = false;\r\n                                    cc.tween(this.role.node).to(0.5, { position: cc.v3(-792.218, -560.198), scale: 0.2 }).start();\r\n                                    // this.startCountdown();\r\n                                }).start();\r\n                            });\r\n                        });\r\n                    } else {\r\n                        this.secondLayer.active = false;\r\n                    }\r\n                });\r\n\r\n            });\r\n        });\r\n    }\r\n\r\n    private handleGameOver() {\r\n        this.scheduleOnce(() => {\r\n            SoundManager.playEffect(\"恭喜你找回所有物品\", false, true, false, () => { });\r\n        }, 1);\r\n        this.endLayer.active = true;\r\n        this.unscheduleAllCallbacks();\r\n    }\r\n\r\n    private ocClickReplay() {\r\n        SyncDataManager.getSyncData().customSyncData.curStep = 0;\r\n        SyncDataManager.getSyncData().customSyncData.isClickStart = false;\r\n        SyncDataManager.getSyncData().customSyncData.countdown = EditorManager.editorData.countdown;\r\n        SyncDataManager.getSyncData().customSyncData.curHideItem = [];\r\n        SyncDataManager.getSyncData().customSyncData.allHideItem = [];\r\n\r\n        SyncDataManager.getSyncData().customSyncData.answerTimes++;\r\n        this.init();\r\n    }\r\n\r\n    private onClickGameOver() {\r\n        ListenerManager.dispatch(EventType.REPORT_RIGHT, true);\r\n        ListenerManager.dispatch(EventType.GAME_OVER);\r\n    }\r\n}\r\n"]}