{"version":3,"sources":["assets\\frame\\scripts\\UI\\Panel\\OverTips.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { SoundManager } from './../../Manager/SoundManager';\r\nimport { Tools } from '../../Utils/Tools';\r\nimport BaseFrameUI from '../BaseFrameUI';\r\nimport { UIHelp } from '../../Utils/UIHelp';\r\nimport { UIManager } from '../../Manager/UIManager';\r\nimport { T2M } from '../../SDK/T2M';\r\nimport { FrameMsgType } from '../../Data/FrameMsgType';\r\nimport { ConstValue } from '../../../../game/scripts/Data/ConstValue';\r\nimport { EditorManager } from '../../../../game/scripts/Manager/EditorManager';\r\nimport { ReportManager } from '../../Manager/ReportManager';\r\n\r\nexport enum Type_Tile {\r\n    ZuoDaJieShu,\r\n    ChuangGuanChengGong,\r\n    TiaoZhanJieShu,\r\n    TiaoZhanChengGong,\r\n    ChuangGuanJieShu,\r\n}\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n@ccclass\r\nexport class OverTips extends BaseFrameUI {\r\n    public static className = 'OverTips';\r\n\r\n    @property(cc.Node)\r\n    private btn_additional: cc.Node = null;\r\n\r\n    private _lb_tips: cc.Node = null;\r\n    private _sp_complete: cc.Node = null;\r\n    private _btn_close: cc.Node = null;\r\n    private _btn_replay: cc.Node = null;\r\n\r\n    private callback = null;\r\n\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    onLoad() {\r\n    }\r\n\r\n    start() {\r\n        this._btn_close.on(cc.Node.EventType.TOUCH_END, this.onClickClose, this);\r\n\r\n        T2M.addSyncEventListener(FrameMsgType.OVERTIPS_CLOSE, this.doClickClose.bind(this));\r\n    }\r\n\r\n    onDisable() {\r\n        this._btn_close.off(cc.Node.EventType.TOUCH_END, this.onClickClose, this);\r\n    }\r\n\r\n    /**\r\n     设置显示内容\r\n     @param {number} type          0: 错误  1：答对了  2：闯关成功(一直显示不会关闭)\r\n     @param {string} str           提示内容\r\n     @param {Function} callback    回调函数\r\n     @param {string} endTitle      end动效提示文字\r\n     @param {boolean} isShowReplay     是否显示重玩按钮\r\n     @param {boolean} isShowClose     是否显示关闭按钮\r\n     @param {boolean} autoOff     是否自动关闭\r\n     */\r\n    init(\r\n        type: number,\r\n        str: string = '',\r\n        callback: Function,\r\n        endTitle?: string,\r\n        isShowReplay?: boolean,\r\n        isShowClose: boolean = false,\r\n        autoOff: boolean = true,\r\n    ): void {\r\n        this.callback = callback;\r\n        this._sp_complete.active = true;\r\n        this._lb_tips.active = type != 2;\r\n        this._lb_tips.getComponent(cc.Label).string = str;\r\n        this._btn_close.active = isShowClose && (0 === type || 1 === type);\r\n\r\n        let btnNode = null\r\n        if (EditorManager.editorData.additional.length > 0 && ReportManager.isPassGame() && !ReportManager.isPassAdditonal()) {\r\n            this.btn_additional.active = true;\r\n            this.btn_additional.setScale(0.01);\r\n            btnNode = this.btn_additional;\r\n        }\r\n        else if (ReportManager.isPassGame() && ReportManager.isPassAdditonal()) {\r\n            this._btn_replay.active = isShowReplay;\r\n            this._btn_replay.setScale(0.01);\r\n            btnNode = this._btn_replay\r\n        }\r\n\r\n        SoundManager.playEffect(\"settle_star0\", false);\r\n        Tools.playSpine(this._sp_complete.getComponent(sp.Skeleton), 'tiaozhan_kaishi', false, () => {\r\n            if (btnNode && btnNode.active) {\r\n                cc.tween(btnNode)\r\n                    .to(0.5, { scale: 1 }, { easing: 'backOut' })\r\n                    .start();\r\n            }\r\n            Tools.playSpine(this._sp_complete.getComponent(sp.Skeleton), 'tiaozhan_xunhuan', true);\r\n        });\r\n\r\n        this.playTipsAction();\r\n        UIHelp.closeMask();\r\n    }\r\n\r\n    delayClose(): void {\r\n        this.scheduleOnce(() => {\r\n            this.doClickClose();\r\n        }, 0);\r\n    }\r\n\r\n    playTipsAction() {\r\n        if (this._lb_tips.active) {\r\n            let endPos = cc.v2(this._lb_tips.position.x, this._lb_tips.position.y);\r\n            let framePos_1 = cc.v2(endPos.x, endPos.y - 72.8);\r\n            let framePos_2 = cc.v2(endPos.x, endPos.y + 12);\r\n            let framePos_3 = cc.v2(endPos.x, endPos.y - 8);\r\n            let framePos_4 = cc.v2(endPos.x, endPos.y + 7.3);\r\n            this._lb_tips.position = cc.v3(framePos_1.x, framePos_1.y);\r\n            cc.tween(this._lb_tips)\r\n                .to(0.08, { x: framePos_2.x, y: framePos_2.y })\r\n                .to(0.08, { x: framePos_3.x, y: framePos_3.y })\r\n                .to(0.08, { x: framePos_4.x, y: framePos_4.y })\r\n                .to(0.06, { x: endPos.x, y: endPos.y })\r\n                .start();\r\n        }\r\n    }\r\n\r\n    onClickClose(event?, customEventData?): void {\r\n        T2M.dispatch(FrameMsgType.OVERTIPS_CLOSE, null);\r\n    }\r\n\r\n    doClickClose() {\r\n        if (this.callback) this.callback();\r\n        UIHelp.closeOverTips();\r\n    }\r\n}\r\n"]}